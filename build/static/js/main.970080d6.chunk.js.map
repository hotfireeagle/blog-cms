{"version":3,"sources":["store/reducer.ts","constant/conf.tsx","page/index/action.ts","util/tool.ts","page/index/reducer.ts","store/state.ts","store/context.ts","store/provider.tsx","util/token.ts","privateRoute.tsx","constant/route.tsx","component/menu/index.tsx","component/topbar/index.tsx","page/index/index.tsx","page/404/index.tsx","component/message/component.tsx","component/message/index.tsx","util/fetch.ts","page/login/index.tsx","component/tagItem/index.tsx","component/addTag/index.tsx","page/tag/index.tsx","page/article/index.tsx","page/articleList/index.tsx","route.tsx","app.tsx","serviceWorker.ts","index.tsx"],"names":["appReducers","ApiCode","ADD","prefix","obj2str","obj","keys","Object","result","forEach","key","push","join","pageIndex","reducer","prevState","action","type","actionObj","count","actions","obj2arr","appStoreState","modules","i","len","length","moduleName","moduleObj","includes","prevModuleState","nextModuleState","moduleReducer","defaultStoreState","AppContext","React","createContext","AppProvider","props","useReducer","appState","appStore","dispatch","Provider","value","children","saveToken","token","localStorage","setItem","err","getToken","getItem","PrivateRouteRenderWrapper","withRouter","to","pathname","state","from","location","PrivateRoute","path","exact","render","InitAppRoutes","url","name","imgSrc","Menu","currentRoute","className","map","routerObj","classNames","linkItem","flexRow","activeLink","src","alt","TopBar","memo","IndexPage","context","useContext","contextStore","onClick","Page404","type2Img","success","error","warn","Message","content","message","onShow","targetDom","show","duration","this","hide","document","createElement","setAttribute","body","appendChild","ReactDOM","setTimeout","bind","removeChild","fetchData","method","loginCb","httpParams","Promise","resolve","reject","data","toLowerCase","headers","JSON","stringify","fetch","then","res","json","response","status","SUCCESS","UNAUTH","ERROR","catch","Login","useState","setName","password","setPassword","history","useHistory","useLocation","handleLogin","a","undefined","replace","htmlFor","onChange","event","target","id","TagItem","isHover","setIsHover","onMouseEnter","onMouseLeave","tagObj","updateList","AddTagComponent","addTag","closeModal","placeholder","initialTags","Tag","tags","setTag","showModal","setShowModal","useEffect","initArticleObj","title","toolbar","font","size","align","color","background","script","list","indent","Article","param","useParams","articleObj","setArticleObj","setTags","allScreen","setAllScreen","mount","articleId","eventHandler","keyCode","which","charCode","metaKey","old","window","addEventListener","removeEventListener","setArticleObjHandler","currentState","setContentHandler","console","log","theme","ArticleList","apiResponse","setApiResponse","isMount","AppRoute","App","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","StrictMode","getElementById","URL","process","href","origin","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.970080d6.chunk.js","sourcesContent":["import { pageIndex } from '../page/index/reducer'\n\nexport interface IAction {\n  type: string\n  [k: string]: any\n}\n\ntype IReducer = (state: any, action: IAction) => {}\n\ninterface IReducerObj {\n  reducer: IReducer\n  actions: Array<string>\n}\n\ninterface AppReducers {\n  [k: string]: IReducerObj\n}\n\n/**\n * 找出当前action所对应找出对象，在设计上，只会更新第一个所匹配到的reducer，不会像react-redux所设计的那样一直匹配下去\n * @param appReducers : 整个应用的状态数据，应用的状态按照模块进行组织，利于模块化\n */\nconst combineReducers = (appReducers: AppReducers) => {\n  return function(appStoreState: any, action: IAction) {\n    const modules = Object.keys(appReducers)\n    for (let i = 0, len = modules.length; i < len; i++) {\n      const moduleName = modules[i]\n      const moduleObj = appReducers[moduleName]\n      const moduleActions = moduleObj.actions\n      if (moduleActions.includes(action.type)) {\n        const prevModuleState = appStoreState[moduleName]\n        const moduleReducer = moduleObj.reducer\n        const nextModuleState = moduleReducer(prevModuleState, action)\n        return { ...appStoreState, [moduleName]: nextModuleState }\n      }\n    }\n    return appStoreState // 此时由于返回同一个引用对象，react会根据Object.is算法判断认为两个值是相同的，此时不会触发更新\n  }\n}\n\nexport const reducer = combineReducers({\n  pageIndex,\n})\n","enum ApiCode {\n  SUCCESS = 1, // 成功响应\n  ERROR, // 响应错误\n  UNAUTH, // 未登录以及登录失效\n}\n\nexport {\n  ApiCode,\n}","const prefix = '__page__INDEX__'\n\nexport const ADD = prefix + 'ADD'","interface IObj {\n  [key: string]: any\n}\n\ntype Tobj2str = (obj: IObj) => string\n\ntype Tobj2arr = (obj: IObj) => Array<string>\n\n\n/**\n * 把对象转化为字符串的形式进行表示\n * @param obj ： 需要进行转换的对象参数\n */\nconst obj2str: Tobj2str = (obj: IObj) => {\n  const keys = Object.keys(obj)\n  const result: any[] = []\n  keys.forEach(key => {\n    result.push(`${key}=${obj[key]}`)\n  })\n  return result.join('&')\n}\n\n/**\n * 从对象中提取出value，并把value压进数组在返回\n * @param obj : 需要进行转换的对象参数\n */\nconst obj2arr: Tobj2arr = (obj: IObj) => {\n  const keys = Object.keys(obj)\n  const result: any[] = []\n  keys.forEach(key => result.push(obj[key]))\n  return result\n}\n\nexport {\n  obj2str,\n  obj2arr,\n}","import * as actionObj from './action'\nimport { obj2arr } from '../../util/tool'\nimport { IndexPageStore } from './interface'\n\nconst reducer = (prevState: IndexPageStore, action: any) => {\n  switch (action.type) {\n    case actionObj.ADD:\n      return { ...prevState, count: prevState.count + 1 }\n    default:\n      return prevState\n  }\n}\n\nexport const pageIndex = {\n  reducer,\n  actions: obj2arr(actionObj),\n}\n","import { IndexPageStore } from '../page/index/interface'\n\nexport interface IStoreState {\n  pageIndex: IndexPageStore\n}\n\nexport interface IContext {\n  appStore: IStoreState,\n  dispatch: any\n}\n\nexport const defaultStoreState: IStoreState = {\n  pageIndex: {\n    count: 1,\n  }\n}\n\n","import React from 'react'\nimport { IContext } from './state'\n\nexport const AppContext = React.createContext({} as IContext)\n","import React, { useReducer } from 'react'\nimport { reducer } from './reducer'\nimport { defaultStoreState, IContext } from './state'\nimport { AppContext } from './context'\n\ninterface IProps {\n  children: any,\n}\n\nexport const AppProvider: React.FC<IProps> = (props) => {\n\n  const [appStore, dispatch] = useReducer(reducer, defaultStoreState)\n\n  const appState: IContext = { appStore, dispatch }\n\n  return (\n    <AppContext.Provider value={appState}>\n      {props.children}\n    </AppContext.Provider>\n  )\n}\n","/**\n* 将token存储到本地localStorage\n* @param token \n*/\nconst saveToken: (t: string) => boolean = (token: string) => {\n  if (!localStorage) return false\n  try {\n    localStorage.setItem('token', token)\n  } catch(err) {\n    return false\n  }\n  return true\n}\n\n/**\n * 从本地localStorage中取出token\n */\nconst getToken: () => string = () => {\n  const token = localStorage.getItem('token')\n  return token || ''\n}\n\nexport {\n  saveToken,\n  getToken,\n}\n","import React from 'react'\nimport { Route, Redirect, RouteComponentProps, withRouter } from 'react-router-dom'\nimport { getToken } from './util/token'\n\ninterface IProps {\n  children: any\n  path: string\n  exact?: boolean\n}\n\ntype PRR = RouteComponentProps & { children: any }\n\nconst PrivateRouteRender: React.FC<PRR> = (props) => {\n  const token = getToken()\n  if (token) return props.children\n  return <Redirect to={{ pathname: '/login', state: { from: props.location }}} />\n}\n\nconst PrivateRouteRenderWrapper = withRouter(PrivateRouteRender)\n\nexport const PrivateRoute: React.FC<IProps> = (props) => (\n  <Route path={props.path} exact={!!props.exact} render={() => <PrivateRouteRenderWrapper children={props.children} />} />\n)","interface RouteDesc {\n  url: string // 描述了路由的path信息\n  name: string // 描述了该路由所对应的中文名\n  imgSrc: string // 图片链接\n}\n\nconst InitAppRoutes: RouteDesc[] = [\n  { url: '/', name: '数据看板', imgSrc: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAP1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////9Du/pqAAAAFHRSTlMAQMC/MBDQUCDwYO/gn5CwgHBv3zo/rAsAAAD9SURBVFjD7ZZbDoMgEEVHBASLD3D2v9YWQkqrUEe+TMP5MTFyB05IrtC4P9w5DvWoHl/0CioZHhh4DFCDmPDNJCpOv6FnWcJju2xiRY+2AFajZ62whzLM5RKjy6v2ZhFtzNHlNXt6+EjUVJdpx0x8hbJ0phMcBizssBhwZ9vvC5OSS0G2l6C6FHO0V8zXMZ9gL4/65XJEyo1bMTCW1hsOJ3CTT+DxppDv2X7SkrdXdrns7PjQDoh0/mtxeCWBjPTjDgEMyLAW0AJaQAtoAf8dEKpRARGVKUfjq0kR10vf49l270nk+50hnawwQU0o/weNBomYEfLwjgSHxs14Am9ZK4kFNKnrAAAAAElFTkSuQmCC' },\n  { url: '/tag', name: '标签管理', imgSrc: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAKlBMVEUAAAD///////////////////////////////////////////////////+Gu8ovAAAADXRSTlMAwD8wENDwkKCAYOB/9iX4gQAAANVJREFUSMdjGAWDFLDIFoAo9osOOBRw3L0MomzvNuBQwHr3Eoiae7cAhwLfu1dAlOzdBTgU6N4NAFG5dw1wKJgLtpz57jVskgizue5exCaJMJvj7k1skhCz4X7BBBCz4X7BBBCzYX5BB+6CICB29yqI2ns3EUiWoDkfHaD55C4WgKKgFlP+OqoHlUAg9u4kIKl+9yqIYzDYwgktPTUMSHpihoRTEZDUgYSTkgHBoCYYWaRFtzs4udwGJZdYUHIBJZjBFk6DJd+xw9MTwQKMcBE4CgYnAADT+NxrcIB3cgAAAABJRU5ErkJggg==' },\n  { url: '/articleList', name: '文章管理', imgSrc: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMAwEAQ8DCgkNCfIIBwb2DPX+Cw6awPqQAAAQdJREFUWMPtl9FuwyAMRbFJIAHSdrv//69L1U1WBAyHbpUqcd4icU+ABGGbwV8zx5UarHGuxwkqaK7kJyiZigYr+bbBmhyHHUrcIBF2nMm5T8AbBf4+BZPBAD5aWXkVFwWkE9AQDMGbCDYqsmkFCRWSUuBQwSsFjAqs3YPARcIbfcYhMJZwgOxJgc/+wNcI9Etw3ZsoQxfbIRACW9MnEIbgaQH721OCC4BLl0Dy8P2CVWpNtWCOtyx/RhAmYM3zegFjZ63mZdBUEdjlcaq/D/oSqvWn/9VwDVdAjnK52N7y60wMkLy+3GcxSP5Mw+F+/J+PR8krW550WKNrNl2OjiQjRIpm8B98AZ3BMmVheRoUAAAAAElFTkSuQmCC' },\n]\n\nexport {\n  InitAppRoutes,\n}\n","import React from 'react'\nimport { Link, withRouter, RouteComponentProps } from 'react-router-dom'\nimport classNames from 'classnames'\nimport { InitAppRoutes } from '../../constant/route'\nimport './index.scss'\n\nconst MenuComponent: React.FC<RouteComponentProps> = (props) => {\n\n  const currentRoute: string = props.location.pathname;\n\n  return (\n    <nav className='menuComponentWrapper'>\n      <h1 className='blogTitle'>夜游cola博客管理系统</h1>\n      <div className='linkWrapper flexColumn'>\n        {\n          InitAppRoutes.map(routerObj => <Link\n            className={classNames({ linkItem: true, flexRow: true, activeLink: currentRoute === routerObj.url })}\n            key={routerObj.url}\n            to={routerObj.url}\n          >\n            <img className='linkImg' src={routerObj.imgSrc} alt=\"net err\" />\n            <span>{routerObj.name}</span>\n          </Link>)\n        }\n      </div>\n    </nav>\n  );\n}\n\nconst Menu = withRouter(MenuComponent)\n\nexport {\n  Menu,\n}\n","import React from 'react'\nimport './index.scss'\n\nconst TopBarComponent: React.FC<any> = props => {\n  return <div className='topbarComponentWrapper flexRow'>\n    <span className='flexg'></span>\n    <span>哈哈海</span>\n  </div>\n}\n\nconst TopBar = React.memo(TopBarComponent)\n\nexport {\n  TopBar,\n}\n","import React from 'react'\nimport { AppContext } from '../../store/context'\nimport { ADD } from './action'\n\nexport const IndexPage: React.FC<any> = props => {\n  const context = React.useContext(AppContext)\n  \n  const contextStore = { ...context.appStore.pageIndex }\n\n  const add = () => context.dispatch({ type: ADD })\n\n  return <h1 onClick={add}>{contextStore.count}</h1>\n}\n","import React from 'react'\n\nconst Page404: React.FC<any> = () => <h1>404</h1>\n\nexport {\n  Page404,\n}\n","import React from 'react'\nimport './index.scss'\n\nexport type MessageType = 'success' | 'error' | 'warn'\n\ninterface IProps {\n  type: MessageType, // 弹窗类型\n  content: string, // 弹窗内容\n}\n\nconst type2Img = {\n  success: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAPFBMVEUAAAASltsQldoRltsQj98QldsRltsRltsRldsQl9sQltsSldwQl98SldoRltoRldoRltsSltoQltwSlttXKl5aAAAAE3RSTlMAgDDwEGDgsO9AcJAgn9DPwKBQR/pUFgAAAURJREFUWMPtl8uSwiAURCG8ITGP/v9/HRdT5dxKpGEwO88S67TXFDZEfbmVOWWtQ9A6p7nfPsqKP6wl9dhWe5zw2jbrEZfEtggndEl0/OsDqgQyxORB8FPVj6DEifgDCcSnCdajEX/9JAOaCVe+Qwfu7NuIDuL5R2h0odkAfAQyQPcIHp146R9UMDkbsSAbplB/UiqJlSICVu4/EUur6M8mP0Ng1YvU4jsIxEPI//CRyS5gPvT7gG2eA/NlwAbB/FzamY9QD1C78EmAvvpor/jkGWD5TXj5JCDjMqHUfOTqRlp41aX6Vl6YD1Epj4sE4j/o33mp+ii8UDZXq4k0WmmfLlVr+nxjxw+WoRGMHTxcj9Hj/Z4LhpoMEUVJkQTikwTij140h6+6DGcq47u26755o2t76wuHJJWH6K+Shl66rPpyJz/fFJkakHEyUwAAAABJRU5ErkJggg==',\n  error: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAPFBMVEUAAADfEADYHgbYHQXYHgXYHgbaGwXYHgXYHgXYHATYHQXYHAXYHQbYHgXYHQbXGADZHQPXHQXYHQXYHgaM9nrqAAAAE3RSTlMAEIDQz+Aw8O9AYJCwcK8gUMCPAhPPhQAAAWFJREFUWMPtl0GWhCAMBUkAEVR0Ove/6yzGJ3YHCAzPXddW6xsjRlRfHmX3G2KMiJvf++3jZeiGefkeG9ASwyI06zNlmdsiQtJ5RBB1iFQlCkVMlgTsVPVnEpmnAZ8lcH8kASw1YvOdjNRMzPmBOgjch5k6mPlNIHWBQgH9JSDRWAmWOrHv/sGvEDRd6MAr9OrOQh8sSoG+fMieccfkbhF08nmTzNv8JHYYzoTTB0OfgEp4KiUkv9qEjYoJRZ82tgqyCUWfkAVkE05fCPihQkLFp1UO0H8BWg7Aop8S+nugUxO1FLAVfXM+TeEx+qKfVlR1Ie1lv5wA6gY7jKd/JSC7hPw6m7QecmeIA8XQhZEGyvhIGx+q4Pp8B+MflqESHAx+XA+VYW3312c2GGpyjQ0ob5LciM8TZH98o8mBVeg/KIngKuWHtu2+K+gIj/1wcPyi77Ze/D9/utYVcfOgvjzJL+a+ldD5g/QyAAAAAElFTkSuQmCC',\n  warn: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAOVBMVEUAAAD06yjz6in/7yDz6Sr06yn06Sn06iv06ir06inz6Sr16yr06ir06ijz6Sn37yjz6in17Cn06iozYJ84AAAAEnRSTlMAQPAQgHDgMM+QsH/QYK8gwFDfm4HnAAABRUlEQVRYw+2Xy5aEIAxERQLyUFvz/x87p1eMx2glMj2rri3WNZAYw/DVR/VyodZ1rTW4l92958S/lLKzuH2NfFKsXm0fWdSoQyzNfkYs+PUr32oFQUyRgeJ06x8Zapyw305o/h6Cj6xUlE9SPP9tE3Mh5l8OVt7YImxAei6/V7JEPm+CWJB7rzgWRKoAGgCHQAwAKIRoBcSjf2cDoK01ZTsgHwDJDkiH/sl2APuhyQEAPITwBBBAFUAA/SVgewIo3YD/OINwlyJSpDG1KpXouJA4hXDlZwdKGerQUma7f9Z8zjyHcMXOmoYSb6JzoKWhNEbQVCGAVG09tjqAfxay1QGBXxtSC6BpsQD2QVDR+0v3gNE/4vQPWf1jXv+gKcsXcP6+e9jG8jRe2El9YyDpwtHsGrk8HzpTdo8uXUSlEAXnh68+qR+IfpETmKzRMgAAAABJRU5ErkJggg==',\n}\n\nconst Message: React.FC<IProps> = (props) => {\n\n  return <div className='messageComponentWrapper'>\n    <div className='contentWrapper flexRow'>\n      <img src={type2Img[props.type]} alt='no time' />\n      <span>{props.content}</span>\n    </div>\n  </div>\n}\n\nexport {\n  Message,\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Message, MessageType } from './component'\n\ninterface IMessage {\n  onShow: boolean, // 是否已存在显示的message弹窗\n  targetDom: HTMLDivElement | null, // 挂载DOM节点\n  readonly show: (content: string, type: MessageType, duration?: number) => void, // 显示弹窗\n  readonly hide: () => void, // 隐藏弹窗\n  success: (content: string, duration?: number) => void, // 弹窗的成功状态\n  error: (content: string, duration?: number) => void, // 弹窗的错误状态\n  warn: (content: string, duration?: number) => void, // 弹窗的警告状态\n}\n\nconst message: IMessage = {\n\n  onShow: false,\n\n  targetDom: null,\n  \n  show(content: string, type: MessageType, duration: number=2000) {\n    if (this.onShow) this.hide()\n    this.onShow = true\n    this.targetDom = document.createElement('div')\n    this.targetDom.setAttribute('id', 'messageTargetJs')\n    document.body.appendChild(this.targetDom)\n    ReactDOM.render(<Message content={content} type={type} />, this.targetDom)\n\n    setTimeout(this.hide.bind(this), duration)\n  },\n\n  hide() {\n    this.targetDom && document.body.removeChild(this.targetDom)\n    this.targetDom = null\n    this.onShow = false\n  },\n\n  success(content: string, duration?: number) {\n    const type: MessageType = 'success'\n    this.show(content, type, duration)\n  },\n\n  error(content: string, duration?: number) {\n    const type: MessageType = 'error'\n    this.show(content, type, duration)\n  },\n\n  warn(content: string, duration?: number) {\n    const type: MessageType = 'warn'\n    this.show(content, type, duration)\n  },\n\n}\n\nexport {\n  message,\n}\n","import { getToken } from './token'\nimport { obj2str } from './tool'\nimport { ApiCode } from '../constant/conf'\nimport { message } from '../component/message'\n\ntype HttpMethods = 'get' | 'GET' | 'post' | 'POST' | 'DELETE' | 'delete'\n\ntype FunType = (api: string, method: HttpMethods, loginCb?: () => void, data?: any) => Promise<any>\n\ninterface IResponse {\n  status: ApiCode,\n  data: any,\n  message: string,\n  [key: string]: any\n}\n\n/**\n * 获取数据的工具类方法\n * @param url : 路由名称\n * @param httpParams : 请求参数\n */\nconst fetchData: FunType = (url: string, method: HttpMethods, loginCb?: () => void, httpParams?: any) => {\n  return new Promise((resolve, reject) => {\n    let data: any;\n    if (method.toLowerCase() === 'get') {\n      data = {\n        method: 'GET',\n        headers: { 'token': getToken(), },\n      }\n      httpParams && (url = `${url}?${obj2str(httpParams)}`)\n    } else if (method.toLowerCase() === 'delete') {\n      data = {\n        method: 'DELETE',\n        headers: { 'token': getToken(), },\n      }\n      httpParams && (url = `${url}?${obj2str(httpParams)}`)\n    } else { // POST类请求\n      data = {\n        method: 'POST',\n        body: JSON.stringify(httpParams),\n        headers: {\n          'token': getToken(),\n          'content-type': 'application/json',\n        },\n      }\n    }\n    fetch(url, data).then(res => res.json())\n      .then((response: IResponse) => {\n        if (response.status === ApiCode.SUCCESS) {\n          resolve(response.data)\n        } else if (response.status === ApiCode.UNAUTH) {\n          loginCb && loginCb()\n        } else if (response.status === ApiCode.ERROR) {\n          message.error(response.message);\n        }\n      }).catch(err => {\n        message.error(`解析JSON发生错误-接口为${url}`)\n        reject(err)\n      })\n  })\n}\n\nexport {\n  fetchData,\n}\n","import React, { useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { message } from '../../component/message'\nimport { fetchData } from '../../util/fetch'\nimport { saveToken } from '../../util/token'\nimport './index.scss'\n\ninterface HasFrom {\n  from: any\n}\n\nconst Login: React.FC<any> = props => {\n\n  const [name, setName] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n  const location = useLocation()\n\n  const { from } = location.state as HasFrom || { from: { pathname: '/' } }\n\n  const handleLogin = async () => {\n    const obj = { name, password }\n    const api = '/api/user/login'\n    const token = await fetchData(api, 'post', undefined, obj)\n    message.success('登录成功')\n    saveToken(token)\n    history.replace(from)\n  }\n\n  return (\n    <div className='loginComponentWrapper'>\n      <div className='loginBody flexColumn'>\n        <h4 className='title'>登录以继续</h4>\n        <div className='inputRow'>\n          <label htmlFor='nameArea'>账户</label>\n          <input value={name} onChange={event => setName(event.target.value)} type='name' id='nameArea' />\n        </div>\n        <div className='inputRow'>\n          <label htmlFor='passwordArea'>密码</label>\n          <input value={password} onChange={event => setPassword(event.target.value)} type='password' id='passwordArea' />\n        </div>\n        <button onClick={handleLogin}>登录</button>\n      </div>\n      <div className='copyRight'>由前端React+后端Ｎest驱动</div>\n    </div>\n  )\n}\n\nexport {\n  Login,\n}\n","import React, { useState } from 'react'\nimport { ITag } from '../../page/tag/interface'\nimport { fetchData } from '../../util/fetch'\nimport './index.scss'\n\ninterface IProps {\n  tagObj: ITag\n  updateList: any\n}\n\nexport const TagItem: React.FC<IProps> = (props) => {\n\n  const [isHover, setIsHover] = useState(false)\n\n  const deleteTag = () => {\n    const url = `/api/tag/${props.tagObj.id}`\n    fetchData(url, 'delete').then(res => {\n      props.updateList()\n    })\n  }\n\n  return (\n    <div className='tagComponentWrapper flexcc' onMouseEnter={() => setIsHover(true)} onMouseLeave={() => setIsHover(false)} >\n      <div className='flexRow'>\n        <h1>{props.tagObj.name}</h1>\n        {isHover && <img onClick={deleteTag} className='delImg' alt='img_demo' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAMFBMVEUAAACrq6uqqqqqqqqqqqqqqqqqqqqqqqqvr6+pqamqqqqrq6unp6epqamqqqqqqqpFGB6KAAAAD3RSTlMAQGAwP9CQ8BCgn3Ag328I8sB8AAABKUlEQVRIx+yQMQrCQBBFhw2IWOkJ3BvESq9il0CO4AG0sfcm2ljrmVaiWMgXhuVPmCyewNcksI+f7JM/ng08n04GTPcY04pxRIFejAb4OTFDkQeFM/BeOK7AUzIBwEk8jf1EDfQH8dyA/FYB2MqIJWCRXveywEg7KQuMNC8LjJSkLDDSRZR1Z08VGIm3iTnLisIw0gRIOUtLgZFU0IkACi5SBZ2owU+4SHoUg2pZcJH0TC0KjGQTOkDBRQpQIoUcyU0klsyR/EQ04bv5////wquAE48VhB1J2JuEA4pwUBOOLMLRDeEuwJdgwIGFL8kxcBJItNDAoiDjwAKL3MxLOPsTLkDggYWrCIIHlgsaeIpUiDFw4igGCRakhIpigoU5/urgazLDKIACABa7LLcqkm5rAAAAAElFTkSuQmCC' />}\n      </div>\n    </div>\n  )\n}","import React, { useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { message } from '../message/index'\nimport { fetchData } from '../../util/fetch'\nimport './index.scss'\n\ninterface IProps {\n  closeModal: () => void // 关闭模态\n  updateList: () => void // 更新列表\n}\n\nexport const AddTagComponent: React.FC<IProps> = (props) => {\n  const [name, setName] = useState('')\n  const history = useHistory()\n  const location = useLocation()\n\n  const loginCb = () => {\n    history.replace({ pathname: '/login', state: { from: location }})\n  }\n\n  const addTag = async () => {\n    const url = '/api/tag/new'\n    await fetchData(url, 'POST', loginCb, { name })\n    props.closeModal()\n    message.show('操作成功', 'success')\n    props.updateList()\n  }\n\n  const nameChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value\n    setName(value)\n  }\n\n  return (\n    <>\n      <div className='addTagComponentWrapper' onClick={props.closeModal} />\n      <div className='modalWrapper'>\n        <div className='modalHeader flexRow'>增加标签</div>\n        <div className='modalBody flexRow'>\n          <input value={name} onChange={nameChangeHandler} className='w472' placeholder='请输入标签名' type='text' />\n        </div>\n        <div className='modalFooter flexRow'>\n          <span className='flexg'></span>\n          <button className='sureBtn flexcc' onClick={addTag}>确定</button>\n        </div>\n      </div>\n    </>\n  )\n}","import React, { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { TagItem } from '../../component/tagItem'\nimport { fetchData } from '../../util/fetch'\nimport { AddTagComponent } from '../../component/addTag'\nimport { ITag } from './interface'\nimport './index.scss'\n\nconst initialTags: ITag[] = []\n\nexport const Tag: React.FC<any> = () => {\n\n  const [tags, setTag] = useState(initialTags) // 表示标签集合\n  const [showModal, setShowModal] = useState(false) // 表示是否显示输入的模态\n\n  const history = useHistory()\n  const location = useLocation()\n\n  const loginCb = () => { history.replace({ pathname: '/login', state: { from: location } }) }\n\n  const updateList = () => {\n    const url = '/api/tag/all'\n    fetchData(url, 'GET', loginCb).then(data => { setTag(data) })\n  }\n\n  const closeModal = () => { setShowModal(false); }\n\n  useEffect(() => {\n    const url = '/api/tag/all'\n    fetchData(url, 'GET', loginCb).then(data => { setTag(data) })\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div className='inputPageWrapper'>\n      { tags.map(tagObj => (<TagItem key={tagObj.id} tagObj={tagObj} updateList={updateList} />)) }\n      <div className='emptyAdd flexcc' onClick={() => setShowModal(true)}>\n        <span className='addIcon'>+</span>\n      </div>\n      { showModal && <AddTagComponent closeModal={closeModal} updateList={updateList} /> }\n    </div>\n  )\n}\n","import React, { useState, useEffect, ChangeEvent, FormEvent } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport ReactQuill from 'react-quill'\nimport { fetchData } from '../../util/fetch'\nimport { IResponse, IArticle } from './interface'\nimport 'react-quill/dist/quill.snow.css'\nimport './index.scss'\n\ninterface ITag {\n  name: string,\n  id: number,\n}\n\ninterface IParam {\n  articleId?: string\n}\n\nconst initArticleObj: IArticle = {\n  content: '',\n  title: '',\n  tags: []\n}\n\nconst modules = {\n  toolbar: [\n    [{ font: [] }, { size: [] }],\n    [{ align: [] }, 'direction'],\n    ['bold', 'italic', 'underline', 'strike'],\n    [{ color: [] }, { background: [] }],\n    [{ script: 'super' }, { script: 'sub' }],\n    ['blockquote', 'code-block'],\n    [{ list: 'ordered' }, { list: 'bullet'}, { indent: '-1' }, { indent: '+1' }],\n    ['link', 'image', 'video'],\n    ['clean']\n  ],\n}\n\nconst Article: React.FC<any> = (props) => {\n  const history = useHistory()\n  const param = useParams<IParam>()\n\n  const [articleObj, setArticleObj] = useState<IArticle>(initArticleObj) // 文章数据的建模\n  const [tags, setTags] = useState([] as ITag[]) // 标签列表数据的建模\n  const [allScreen, setAllScreen] = useState(false) // 是否全屏\n\n  const loginCb = () => {\n    history.push('/login')\n  }\n\n  /** 设置标签列表数据的effect */\n  useEffect(() => {\n    let mount = true\n    fetchData('/api/tag/all', 'get', loginCb).then(response => {\n      mount && setTags(response)\n    })\n    return () => { mount = false }\n  }, [])\n\n  /** 设置文章数据的effect */\n  useEffect(() => {\n    let mount = true\n    const articleId = param.articleId\n    if (articleId != undefined) { // 修改文章的情况\n      fetchData(`/api/article/${articleId}`, 'get', loginCb).then((res: IResponse) => {\n        const result = {\n          ...res,\n          tags: res.tags.map(tagObj => tagObj.id)\n        }\n        mount && setArticleObj(result)\n      })\n    } else { // 新增文章的情况\n      mount && setArticleObj(initArticleObj)\n    }\n    return () => { mount = false }\n  }, [param.articleId])\n\n  useEffect(() => {\n    const eventHandler = (event: any) => {\n      const keyCode = event.keyCode || event.which || event.charCode\n      const ctrl = event.metaKey\n      if (ctrl && keyCode === 75) { // comand + k\n        setAllScreen(old => !old)\n      }\n    }\n    window.document.addEventListener('keydown', eventHandler)\n    return () => {\n      window.document.removeEventListener('keydown', eventHandler)\n    }\n  }, [])\n\n  /** 保存的逻辑 */\n  const save = () => {\n    fetchData('/api/article/new', 'post', loginCb, articleObj).then(res => {\n      console.log('res', res)\n    })\n  }\n\n  const setArticleObjHandler = (key: 'title' | 'content', value: string) => {\n    setArticleObj((currentState) => ({\n      ...currentState,\n      [key]: value\n    }))\n  }\n\n  const setTitle = (event: ChangeEvent<HTMLInputElement>) => {\n    setArticleObjHandler('title', event.target.value)\n  }\n\n  const tagChangeHandler = (event: ChangeEvent<HTMLSelectElement>) => {\n    const tags = [event.target.value]\n    setArticleObj(currentState => ({\n      ...currentState,\n      tags\n    }))\n  }\n\n  // 富文件内容发生变化的监听方法\n  const setContentHandler = (value: string) => {\n    setArticleObjHandler('content', value)\n  }\n  return (\n    <div className='pageWrapper'>\n      <div className='row'>\n        <label htmlFor='title'>文章标题</label>\n        <input type='text' value={articleObj.title} onChange={setTitle} id='title' />\n      </div>\n\n      <div className='row'>\n        <label htmlFor='lieDay'>文章标签</label>\n        <select id='lieDay' value={articleObj.tags[0] ? +articleObj.tags[0] : 0} onChange={tagChangeHandler}>\n          {\n            tags.map(tagObj => <option value={tagObj.id} key={tagObj.id}>{tagObj.name}</option>)\n          }\n        </select>\n      </div>\n\n      <button onClick={save}>更新</button>\n      {\n        allScreen ?\n        <>\n          <div className='allScreen'></div>\n          <ReactQuill className='rich' theme='snow' value={articleObj.content} onChange={setContentHandler} modules={modules} />\n        </>\n        :\n        <ReactQuill theme='snow' value={articleObj.content} onChange={setContentHandler} modules={modules} />\n      }\n    </div>\n  )\n}\n\nexport {\n  Article,\n}\n","import React, { useState, useEffect } from 'react'\nimport { useHistory, Link } from 'react-router-dom'\nimport { fetchData } from '../../util/fetch'\n\ninterface ITag {\n  id: number\n  name: string\n}\n\ninterface IArticle {\n  id: number\n  title: string\n  tags: Array<ITag>\n}\n\ninterface IResponse {\n  result: Array<IArticle>\n  total: number\n}\n\nexport const ArticleList: React.FC<any> = (props) => {\n  const [apiResponse, setApiResponse] = useState<IResponse>()\n  const history = useHistory()\n\n  const loginCb = () => { history.push('/login') }\n\n  // 设置文章列表数据的effect\n  useEffect(() => {\n    let isMount = true\n    fetchData('/api/article/query', 'post', loginCb).then(data => {\n      isMount && setApiResponse(data)\n    })\n    return () => { isMount = false }\n  }, [])\n\n  if (!apiResponse || !apiResponse.result) return <h1>loading</h1>\n  return (\n    <>\n    <Link to=\"/newArticle\">新建文章</Link>\n    <ul>\n      {\n        apiResponse.result.map(articleObj => (\n          <li key={articleObj.id}>\n            <Link to={`/articleDetail/${articleObj.id}`}>{articleObj.title}</Link>\n          </li>\n        ))\n      }\n    </ul>\n    </>\n  )\n}\n","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { PrivateRoute } from './privateRoute'\nimport { Menu } from './component/menu/index'\nimport { TopBar } from './component/topbar/index'\nimport { IndexPage } from './page/index'\nimport { Page404 } from './page/404'\nimport { Login } from './page/login'\nimport { Tag } from './page/tag'\nimport { Article } from './page/article'\nimport { ArticleList } from './page/articleList'\n\nexport const AppRoute: React.FC<any> = () => (\n  <Router>\n    <Menu />\n    <section className='appRightContainer'>\n      <TopBar />\n      <div className='appRightContentWrapper'>\n        <Switch>\n          <Route path='/login'>\n            <Login />\n          </Route>\n          <PrivateRoute path='/' exact={true}>\n            <IndexPage />\n          </PrivateRoute>\n          <PrivateRoute path='/tag'>\n            <Tag />\n          </PrivateRoute>\n          <PrivateRoute path='/newArticle'>\n            <Article />  \n          </PrivateRoute>'\n          <PrivateRoute path='/articleDetail/:articleId'>\n            <Article />\n          </PrivateRoute>\n          <PrivateRoute path='/articleList'>\n            <ArticleList />\n          </PrivateRoute>\n          <Route path='*'>\n            <Page404 />\n          </Route>\n        </Switch>\n      </div>\n    </section>\n  </Router>\n)\n","import * as React from 'react'\nimport { AppProvider } from './store/provider'\nimport { AppRoute } from './route'\n\nexport const App: React.FC<any> = () => (\n  <AppProvider>\n    <AppRoute />\n  </AppProvider>\n)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { App } from './app'\nimport * as serviceWorker from './serviceWorker'\nimport './scss/app.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}