{"version":3,"sources":["store/reducer.ts","constant/conf.tsx","component/menu/action.ts","util/tool.ts","component/menu/reducer.ts","store/state.ts","store/context.ts","store/provider.tsx","util/token.ts","component/privateRoute/index.tsx","constant/route.tsx","component/menu/index.tsx","page/404/index.tsx","component/message/component.tsx","component/message/index.tsx","util/fetch.ts","page/login/index.tsx","component/tagItem/index.tsx","component/addTag/index.tsx","page/tag/index.tsx","component/select/index.tsx","page/article/index.tsx","component/loadingWrapper/index.tsx","page/articleList/index.tsx","route.tsx","app.tsx","serviceWorker.ts","index.tsx"],"names":["appReducers","ApiCode","setMenuDisplay","prefix","obj2str","obj","keys","Object","result","forEach","key","push","join","actions","obj2arr","reducer","moduleState","action","type","showMenu","data","menu","appStoreState","modules","i","len","length","moduleName","moduleObj","includes","prevModuleState","nextModuleState","moduleReducer","defaultStoreState","AppContext","React","createContext","AppProvider","props","useReducer","appState","appStore","dispatch","Provider","value","children","saveToken","token","localStorage","setItem","err","getToken","getItem","PrivateRouteRenderWrapper","withRouter","to","pathname","state","from","location","PrivateRoute","path","exact","render","InitAppRoutes","url","name","imgSrc","Menu","history","useHistory","currentRoute","className","onClick","map","routerObj","classNames","linkItem","flexRow","activeLink","src","alt","Page404","type2Img","success","error","warn","Message","content","message","onShow","targetDom","show","duration","this","hide","document","createElement","setAttribute","body","appendChild","ReactDOM","setTimeout","bind","removeChild","fetchData","method","loginCb","httpParams","Promise","resolve","reject","toLowerCase","headers","JSON","stringify","fetch","then","res","json","response","status","SUCCESS","UNAUTH","ERROR","catch","Login","useState","setName","password","setPassword","useLocation","handleLogin","a","undefined","replace","htmlFor","onChange","event","target","id","TagItem","isHover","setIsHover","onMouseEnter","onMouseLeave","tagObj","updateList","AddTagComponent","addTag","closeModal","placeholder","initialTags","Tag","tags","setTag","showModal","setShowModal","useEffect","Select","showOptions","setShowOpitons","style","width","height","options","find","findTagName","placeHolder","top","optionObj","valueChangeHandler","choseTagHandler","initArticleObj","title","toolbar","font","size","align","color","background","script","list","indent","Article","param","useParams","context","useContext","articleObj","setArticleObj","setTags","allScreen","setAllScreen","mount","articleId","eventHandler","keyCode","which","charCode","metaKey","old","window","addEventListener","removeEventListener","setArticleObjHandler","currentState","setContentHandler","console","log","theme","LoadingWrapper","loading","maxHeight","ArticleList","apiResponse","setApiResponse","setLoading","isMount","renderTags","c","colors","Math","floor","random","returnColor","border","date","AppRoute","App","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","getElementById","URL","process","href","origin","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.4dce0c9f.chunk.js","sourcesContent":["import { IAction } from '../data.interface'\nimport menu from '../component/menu/reducer'\n\ntype IReducer = (state: any, action: IAction) => {}\n\ninterface IReducerObj {\n  reducer: IReducer\n  actions: Array<string>\n}\n\ninterface AppReducers {\n  [k: string]: IReducerObj\n}\n\n/**\n * 找出当前action所对应找出对象，在设计上，只会更新第一个所匹配到的reducer，不会像react-redux所设计的那样一直匹配下去\n * @param appReducers : 整个应用的状态数据，应用的状态按照模块进行组织，利于模块化\n */\nconst combineReducers = (appReducers: AppReducers) => {\n  return function(appStoreState: any, action: IAction) {\n    const modules = Object.keys(appReducers)\n    for (let i = 0, len = modules.length; i < len; i++) {\n      const moduleName = modules[i]\n      const moduleObj = appReducers[moduleName]\n      const moduleActions = moduleObj.actions\n      if (moduleActions.includes(action.type)) {\n        const prevModuleState = appStoreState[moduleName]\n        const moduleReducer = moduleObj.reducer\n        const nextModuleState = moduleReducer(prevModuleState, action)\n        return { ...appStoreState, [moduleName]: nextModuleState }\n      }\n    }\n    return appStoreState // 此时由于返回同一个引用对象，react会根据Object.is算法判断认为两个值是相同的，此时不会触发更新\n  }\n}\n\nexport const reducer = combineReducers({\n  menu,\n})\n","enum ApiCode {\n  SUCCESS = 1, // 成功响应\n  ERROR, // 响应错误\n  UNAUTH, // 未登录以及登录失效\n}\n\nexport {\n  ApiCode,\n}","const prefix = '__menu__action'\n\nexport const setMenuDisplay = prefix + '_set_menu_display_'\n","interface IObj {\n  [key: string]: any\n}\n\ntype Tobj2str = (obj: IObj) => string\n\ntype Tobj2arr = (obj: IObj) => Array<string>\n\n\n/**\n * 把对象转化为字符串的形式进行表示\n * @param obj ： 需要进行转换的对象参数\n */\nconst obj2str: Tobj2str = (obj: IObj) => {\n  const keys = Object.keys(obj)\n  const result: any[] = []\n  keys.forEach(key => {\n    result.push(`${key}=${obj[key]}`)\n  })\n  return result.join('&')\n}\n\n/**\n * 从对象中提取出value，并把value压进数组在返回\n * @param obj : 需要进行转换的对象参数\n */\nconst obj2arr: Tobj2arr = (obj: IObj) => {\n  const keys = Object.keys(obj)\n  const result: any[] = []\n  keys.forEach(key => result.push(obj[key]))\n  return result\n}\n\nexport {\n  obj2str,\n  obj2arr,\n}","import * as actions from './action'\nimport { obj2arr } from '../../util/tool'\nimport { IMenuModuleState } from './interface'\nimport { IAction } from '../../data.interface'\n\nconst reducer = (moduleState: IMenuModuleState, action: IAction) => {\n  switch(action.type) {\n    case actions.setMenuDisplay:\n      return { ...moduleState, showMenu: action.data }\n    default:\n      return moduleState\n  }\n}\n\nconst obj = {\n  actions: obj2arr(actions),\n  reducer,\n}\n\nexport default obj\n","import { IMenuModuleState } from '../component/menu/interface'\n\nexport interface IStoreState {\n  menu: IMenuModuleState\n}\n\nexport interface IContext {\n  appStore: IStoreState,\n  dispatch: any\n}\n\nexport const defaultStoreState: IStoreState = {\n  menu: {\n    showMenu: true\n  }\n}\n","import React from 'react'\nimport { IContext } from './state'\n\nexport const AppContext = React.createContext({} as IContext)\n","import React, { useReducer } from 'react'\nimport { reducer } from './reducer'\nimport { defaultStoreState, IContext } from './state'\nimport { AppContext } from './context'\n\ninterface IProps {\n  children: any,\n}\n\nexport const AppProvider: React.FC<IProps> = (props) => {\n\n  const [appStore, dispatch] = useReducer(reducer, defaultStoreState)\n\n  const appState: IContext = { appStore, dispatch }\n\n  return (\n    <AppContext.Provider value={appState}>\n      {props.children}\n    </AppContext.Provider>\n  )\n}\n","/**\n* 将token存储到本地localStorage\n* @param token \n*/\nconst saveToken: (t: string) => boolean = (token: string) => {\n  if (!localStorage) return false\n  try {\n    localStorage.setItem('token', token)\n  } catch(err) {\n    return false\n  }\n  return true\n}\n\n/**\n * 从本地localStorage中取出token\n */\nconst getToken: () => string = () => {\n  const token = localStorage.getItem('token')\n  return token || ''\n}\n\nexport {\n  saveToken,\n  getToken,\n}\n","import React from 'react'\nimport { Route, Redirect, RouteComponentProps, withRouter } from 'react-router-dom'\nimport { getToken } from '../../util/token'\n\ninterface IProps {\n  children: any\n  path: string\n  exact?: boolean\n}\n\ntype PRR = RouteComponentProps & { children: any }\n\nconst PrivateRouteRender: React.FC<PRR> = (props) => {\n  const token = getToken()\n  if (token) return props.children\n  return <Redirect to={{ pathname: '/login', state: { from: props.location }}} />\n}\n\nconst PrivateRouteRenderWrapper = withRouter(PrivateRouteRender)\n\nconst PrivateRoute: React.FC<IProps> = (props) => (\n  <Route path={props.path} exact={!!props.exact} render={() => <PrivateRouteRenderWrapper children={props.children} />} />\n)\n\nexport default PrivateRoute","interface RouteDesc {\n  url: string // 描述了路由的path信息\n  name: string // 描述了该路由所对应的中文名\n  imgSrc: string // 图片链接\n}\n\nconst InitAppRoutes: RouteDesc[] = [\n  { url: '/', name: '文章管理', imgSrc: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAaVBMVEUAAAAsLCwsLCwsLCwsLCwrKyssLCwsLCwsLCwsLCwrKyssLCwtLS0oKCgsLCwsLCwsLCwrKyssLCwsLCwsLCwrKysrKysrKyssLCwpKSktLS0sLCwtLS0sLCwrKystLS0sLCwAAAAsLCzYs8ySAAAAInRSTlMAv4BAuJjzxu3V31ZNDuXar6SQi3pwajIoGc7JsayHYV0CJY/VGQAAALZJREFUOMvt0skSgjAQRdFHSAijzCDOvv//SBUKAhhYuvKuUl2nsuhqvEtE5tMUtFgWB15+E2M5w4OLea2vE5hcPk5ePAcFj1gAtzszgumSYgXw1LybieOswWfIZh9Ast4HyFjtAygKK0hYYkiwsQFoupOobSDmtJiClQVAHHgtRV/q2AA6IT0OGWDP+YOfAqm3gZYAlL8NfNXfjYItc5YBI1iLGAwPyVCJr1RIOVJzQbM82f//At+HDX0b8ggHAAAAAElFTkSuQmCC' },\n  { url: '/tag', name: '标签管理', imgSrc: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAAsLCwsLCwsLCwrKystLS0rKysrKysrKysrKyssLCwrKyssLCwtLS0sLCwqKiotLS0sLCwsLCwrKyssLCwsLCwtLS0rKystLS0zMzMsLCwsLCwrKystLS0sLCxcyzcPAAAAHnRSTlMA5IC/P9TfqqIp27KLiVMYEtBnWbmbcWEzBfmSh0mC+GzWAAAA00lEQVQ4y9WRSQ6DMBRD/QMkTGVoy9TB9z9mVRIgbSNWbOqVLT0l+jYOkdGclah3UuLSGU4lV52AdEvKAcLYmpgC6CVdGDmAxOr89F9Asp2ZBM9UXjXBonBy5ebVV9XHqRR/TUAZ0engre2taa+aVayA/lgTV0ZxU1fCEsGiFDuUYgChCgIFY0MaoGcXBISN/TNjEQQ06yjFDJggkLJaFngEgTNlCc91zYs1A3MALaXPRkXm08+a9vWr9TdGtb+mX3Uh+T2bNNsGe6pbZthVM+IIvQAzDR2Hnn7qVgAAAABJRU5ErkJggg==' },\n]\n\nexport {\n  InitAppRoutes,\n}\n","import React from 'react'\nimport { Link, withRouter, RouteComponentProps, useHistory } from 'react-router-dom'\nimport classNames from 'classnames'\nimport { InitAppRoutes } from '../../constant/route'\nimport './index.scss'\n\nconst MenuComponent: React.FC<RouteComponentProps> = (props) => {\n  const history = useHistory()\n  const currentRoute: string = props.location.pathname\n\n  const newArticleHandler = () => {\n    history.push('/newArticle')\n  }\n\n  return (\n    <nav className='menuComponentWrapper'>\n      <h1 className='blogTitle'>博客管理系统</h1>\n      <div className='newBtn flexcc'>\n        <span onClick={newArticleHandler}>新建文章</span>\n      </div>\n      <div className='linkWrapper flexColumn'>\n        {\n          InitAppRoutes.map(routerObj => <Link\n            className={classNames({ linkItem: true, flexRow: true, activeLink: currentRoute === routerObj.url })}\n            key={routerObj.url}\n            to={routerObj.url}\n          >\n            <img className='linkImg' src={routerObj.imgSrc} alt=\"net err\" />\n            <span>{routerObj.name}</span>\n          </Link>)\n        }\n      </div>\n    </nav>\n  );\n}\n\nconst Menu = withRouter(MenuComponent)\n\nexport {\n  Menu,\n}\n","import React from 'react'\n\nconst Page404: React.FC<any> = () => <h1>404</h1>\n\nexport {\n  Page404,\n}\n","import React from 'react'\nimport './index.scss'\n\nexport type MessageType = 'success' | 'error' | 'warn'\n\ninterface IProps {\n  type: MessageType, // 弹窗类型\n  content: string, // 弹窗内容\n}\n\nconst type2Img = {\n  success: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAPFBMVEUAAAASltsQldoRltsQj98QldsRltsRltsRldsQl9sQltsSldwQl98SldoRltoRldoRltsSltoQltwSlttXKl5aAAAAE3RSTlMAgDDwEGDgsO9AcJAgn9DPwKBQR/pUFgAAAURJREFUWMPtl8uSwiAURCG8ITGP/v9/HRdT5dxKpGEwO88S67TXFDZEfbmVOWWtQ9A6p7nfPsqKP6wl9dhWe5zw2jbrEZfEtggndEl0/OsDqgQyxORB8FPVj6DEifgDCcSnCdajEX/9JAOaCVe+Qwfu7NuIDuL5R2h0odkAfAQyQPcIHp146R9UMDkbsSAbplB/UiqJlSICVu4/EUur6M8mP0Ng1YvU4jsIxEPI//CRyS5gPvT7gG2eA/NlwAbB/FzamY9QD1C78EmAvvpor/jkGWD5TXj5JCDjMqHUfOTqRlp41aX6Vl6YD1Epj4sE4j/o33mp+ii8UDZXq4k0WmmfLlVr+nxjxw+WoRGMHTxcj9Hj/Z4LhpoMEUVJkQTikwTij140h6+6DGcq47u26755o2t76wuHJJWH6K+Shl66rPpyJz/fFJkakHEyUwAAAABJRU5ErkJggg==',\n  error: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAPFBMVEUAAADfEADYHgbYHQXYHgXYHgbaGwXYHgXYHgXYHATYHQXYHAXYHQbYHgXYHQbXGADZHQPXHQXYHQXYHgaM9nrqAAAAE3RSTlMAEIDQz+Aw8O9AYJCwcK8gUMCPAhPPhQAAAWFJREFUWMPtl0GWhCAMBUkAEVR0Ove/6yzGJ3YHCAzPXddW6xsjRlRfHmX3G2KMiJvf++3jZeiGefkeG9ASwyI06zNlmdsiQtJ5RBB1iFQlCkVMlgTsVPVnEpmnAZ8lcH8kASw1YvOdjNRMzPmBOgjch5k6mPlNIHWBQgH9JSDRWAmWOrHv/sGvEDRd6MAr9OrOQh8sSoG+fMieccfkbhF08nmTzNv8JHYYzoTTB0OfgEp4KiUkv9qEjYoJRZ82tgqyCUWfkAVkE05fCPihQkLFp1UO0H8BWg7Aop8S+nugUxO1FLAVfXM+TeEx+qKfVlR1Ie1lv5wA6gY7jKd/JSC7hPw6m7QecmeIA8XQhZEGyvhIGx+q4Pp8B+MflqESHAx+XA+VYW3312c2GGpyjQ0ob5LciM8TZH98o8mBVeg/KIngKuWHtu2+K+gIj/1wcPyi77Ze/D9/utYVcfOgvjzJL+a+ldD5g/QyAAAAAElFTkSuQmCC',\n  warn: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAOVBMVEUAAAD06yjz6in/7yDz6Sr06yn06Sn06iv06ir06inz6Sr16yr06ir06ijz6Sn37yjz6in17Cn06iozYJ84AAAAEnRSTlMAQPAQgHDgMM+QsH/QYK8gwFDfm4HnAAABRUlEQVRYw+2Xy5aEIAxERQLyUFvz/x87p1eMx2glMj2rri3WNZAYw/DVR/VyodZ1rTW4l92958S/lLKzuH2NfFKsXm0fWdSoQyzNfkYs+PUr32oFQUyRgeJ06x8Zapyw305o/h6Cj6xUlE9SPP9tE3Mh5l8OVt7YImxAei6/V7JEPm+CWJB7rzgWRKoAGgCHQAwAKIRoBcSjf2cDoK01ZTsgHwDJDkiH/sl2APuhyQEAPITwBBBAFUAA/SVgewIo3YD/OINwlyJSpDG1KpXouJA4hXDlZwdKGerQUma7f9Z8zjyHcMXOmoYSb6JzoKWhNEbQVCGAVG09tjqAfxay1QGBXxtSC6BpsQD2QVDR+0v3gNE/4vQPWf1jXv+gKcsXcP6+e9jG8jRe2El9YyDpwtHsGrk8HzpTdo8uXUSlEAXnh68+qR+IfpETmKzRMgAAAABJRU5ErkJggg==',\n}\n\nconst Message: React.FC<IProps> = (props) => {\n\n  return <div className='messageComponentWrapper'>\n    <div className='contentWrapper flexRow'>\n      <img src={type2Img[props.type]} alt='no time' />\n      <span>{props.content}</span>\n    </div>\n  </div>\n}\n\nexport {\n  Message,\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Message, MessageType } from './component'\n\ninterface IMessage {\n  onShow: boolean, // 是否已存在显示的message弹窗\n  targetDom: HTMLDivElement | null, // 挂载DOM节点\n  readonly show: (content: string, type: MessageType, duration?: number) => void, // 显示弹窗\n  readonly hide: () => void, // 隐藏弹窗\n  success: (content: string, duration?: number) => void, // 弹窗的成功状态\n  error: (content: string, duration?: number) => void, // 弹窗的错误状态\n  warn: (content: string, duration?: number) => void, // 弹窗的警告状态\n}\n\nconst message: IMessage = {\n\n  onShow: false,\n\n  targetDom: null,\n  \n  show(content: string, type: MessageType, duration: number=2000) {\n    if (this.onShow) this.hide()\n    this.onShow = true\n    this.targetDom = document.createElement('div')\n    this.targetDom.setAttribute('id', 'messageTargetJs')\n    document.body.appendChild(this.targetDom)\n    ReactDOM.render(<Message content={content} type={type} />, this.targetDom)\n\n    setTimeout(this.hide.bind(this), duration)\n  },\n\n  hide() {\n    this.targetDom && document.body.removeChild(this.targetDom)\n    this.targetDom = null\n    this.onShow = false\n  },\n\n  success(content: string, duration?: number) {\n    const type: MessageType = 'success'\n    this.show(content, type, duration)\n  },\n\n  error(content: string, duration?: number) {\n    const type: MessageType = 'error'\n    this.show(content, type, duration)\n  },\n\n  warn(content: string, duration?: number) {\n    const type: MessageType = 'warn'\n    this.show(content, type, duration)\n  },\n\n}\n\nexport {\n  message,\n}\n","import { getToken } from './token'\nimport { obj2str } from './tool'\nimport { ApiCode } from '../constant/conf'\nimport { message } from '../component/message'\n\ntype HttpMethods = 'get' | 'GET' | 'post' | 'POST' | 'DELETE' | 'delete'\n\ntype FunType = (api: string, method: HttpMethods, loginCb?: () => void, data?: any) => Promise<any>\n\ninterface IResponse {\n  status: ApiCode,\n  data: any,\n  message: string,\n  [key: string]: any\n}\n\n/**\n * 获取数据的工具类方法\n * @param url : 路由名称\n * @param httpParams : 请求参数\n */\nconst fetchData: FunType = (url: string, method: HttpMethods, loginCb?: () => void, httpParams?: any) => {\n  return new Promise((resolve, reject) => {\n    let data: any;\n    if (method.toLowerCase() === 'get') {\n      data = {\n        method: 'GET',\n        headers: { 'token': getToken(), },\n      }\n      httpParams && (url = `${url}?${obj2str(httpParams)}`)\n    } else if (method.toLowerCase() === 'delete') {\n      data = {\n        method: 'DELETE',\n        headers: { 'token': getToken(), },\n      }\n      httpParams && (url = `${url}?${obj2str(httpParams)}`)\n    } else { // POST类请求\n      data = {\n        method: 'POST',\n        body: JSON.stringify(httpParams),\n        headers: {\n          'token': getToken(),\n          'content-type': 'application/json',\n        },\n      }\n    }\n    fetch(url, data).then(res => res.json())\n      .then((response: IResponse) => {\n        if (response.status === ApiCode.SUCCESS) {\n          resolve(response.data)\n        } else if (response.status === ApiCode.UNAUTH) {\n          loginCb && loginCb()\n        } else if (response.status === ApiCode.ERROR) {\n          message.error(response.message);\n        }\n      }).catch(err => {\n        message.error(`解析JSON发生错误-接口为${url}`)\n        reject(err)\n      })\n  })\n}\n\nexport {\n  fetchData,\n}\n","import React, { useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { message } from '../../component/message'\nimport { fetchData } from '../../util/fetch'\nimport { saveToken } from '../../util/token'\nimport './index.scss'\n\ninterface HasFrom {\n  from: any\n}\n\nconst Login: React.FC<any> = props => {\n\n  const [name, setName] = useState('')\n  const [password, setPassword] = useState('')\n  const history = useHistory()\n  const location = useLocation()\n\n  const { from } = location.state as HasFrom || { from: { pathname: '/' } }\n\n  const handleLogin = async () => {\n    const obj = { name, password }\n    const api = '/api/user/login'\n    const token = await fetchData(api, 'post', undefined, obj)\n    message.success('登录成功')\n    saveToken(token)\n    history.replace(from)\n  }\n\n  return (\n    <div className='loginComponentWrapper'>\n      <div className='loginBody flexColumn'>\n        <h4 className='title'>登录以继续</h4>\n        <div className='inputRow'>\n          <label htmlFor='nameArea'>账户</label>\n          <input value={name} onChange={event => setName(event.target.value)} type='name' id='nameArea' />\n        </div>\n        <div className='inputRow'>\n          <label htmlFor='passwordArea'>密码</label>\n          <input value={password} onChange={event => setPassword(event.target.value)} type='password' id='passwordArea' />\n        </div>\n        <button onClick={handleLogin}>登录</button>\n      </div>\n      <div className='copyRight'>由前端React+后端Ｎest驱动</div>\n    </div>\n  )\n}\n\nexport {\n  Login,\n}\n","import React, { useState } from 'react'\nimport { ITag } from '../../page/tag/interface'\nimport { fetchData } from '../../util/fetch'\nimport './index.scss'\n\ninterface IProps {\n  tagObj: ITag\n  updateList: any\n}\n\nexport const TagItem: React.FC<IProps> = (props) => {\n\n  const [isHover, setIsHover] = useState(false)\n\n  const deleteTag = () => {\n    const url = `/api/tag/${props.tagObj.id}`\n    fetchData(url, 'delete').then(res => {\n      props.updateList()\n    })\n  }\n\n  return (\n    <div className='tagComponentWrapper flexcc' onMouseEnter={() => setIsHover(true)} onMouseLeave={() => setIsHover(false)} >\n      <div className='flexRow'>\n        <h1>{props.tagObj.name}</h1>\n        {isHover && <img onClick={deleteTag} className='delImg' alt='img_demo' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAMFBMVEUAAACrq6uqqqqqqqqqqqqqqqqqqqqqqqqvr6+pqamqqqqrq6unp6epqamqqqqqqqpFGB6KAAAAD3RSTlMAQGAwP9CQ8BCgn3Ag328I8sB8AAABKUlEQVRIx+yQMQrCQBBFhw2IWOkJ3BvESq9il0CO4AG0sfcm2ljrmVaiWMgXhuVPmCyewNcksI+f7JM/ng08n04GTPcY04pxRIFejAb4OTFDkQeFM/BeOK7AUzIBwEk8jf1EDfQH8dyA/FYB2MqIJWCRXveywEg7KQuMNC8LjJSkLDDSRZR1Z08VGIm3iTnLisIw0gRIOUtLgZFU0IkACi5SBZ2owU+4SHoUg2pZcJH0TC0KjGQTOkDBRQpQIoUcyU0klsyR/EQ04bv5////wquAE48VhB1J2JuEA4pwUBOOLMLRDeEuwJdgwIGFL8kxcBJItNDAoiDjwAKL3MxLOPsTLkDggYWrCIIHlgsaeIpUiDFw4igGCRakhIpigoU5/urgazLDKIACABa7LLcqkm5rAAAAAElFTkSuQmCC' />}\n      </div>\n    </div>\n  )\n}","import React, { useState } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { message } from '../message/index'\nimport { fetchData } from '../../util/fetch'\nimport './index.scss'\n\ninterface IProps {\n  closeModal: () => void // 关闭模态\n  updateList: () => void // 更新列表\n}\n\nexport const AddTagComponent: React.FC<IProps> = (props) => {\n  const [name, setName] = useState('')\n  const history = useHistory()\n  const location = useLocation()\n\n  const loginCb = () => {\n    history.replace({ pathname: '/login', state: { from: location }})\n  }\n\n  const addTag = async () => {\n    const url = '/api/tag/new'\n    await fetchData(url, 'POST', loginCb, { name })\n    props.closeModal()\n    message.show('操作成功', 'success')\n    props.updateList()\n  }\n\n  const nameChangeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value\n    setName(value)\n  }\n\n  return (\n    <>\n      <div className='addTagComponentWrapper' onClick={props.closeModal} />\n      <div className='modalWrapper'>\n        <div className='modalHeader flexRow'>增加标签</div>\n        <div className='modalBody flexRow'>\n          <input value={name} onChange={nameChangeHandler} className='w472' placeholder='请输入标签名' type='text' />\n        </div>\n        <div className='modalFooter flexRow'>\n          <span className='flexg'></span>\n          <button className='sureBtn flexcc' onClick={addTag}>确定</button>\n        </div>\n      </div>\n    </>\n  )\n}","import React, { useState, useEffect } from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { TagItem } from '../../component/tagItem'\nimport { fetchData } from '../../util/fetch'\nimport { AddTagComponent } from '../../component/addTag'\nimport { ITag } from './interface'\nimport './index.scss'\n\nconst initialTags: ITag[] = []\n\nexport const Tag: React.FC<any> = () => {\n\n  const [tags, setTag] = useState(initialTags) // 表示标签集合\n  const [showModal, setShowModal] = useState(false) // 表示是否显示输入的模态\n\n  const history = useHistory()\n  const location = useLocation()\n\n  const loginCb = () => { history.replace({ pathname: '/login', state: { from: location } }) }\n\n  const updateList = () => {\n    const url = '/api/tag/all'\n    fetchData(url, 'GET', loginCb).then(data => { setTag(data) })\n  }\n\n  const closeModal = () => { setShowModal(false); }\n\n  useEffect(() => {\n    const url = '/api/tag/all'\n    fetchData(url, 'GET', loginCb).then(data => { setTag(data) })\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  return (\n    <div className='inputPageWrapper'>\n      { tags.map(tagObj => (<TagItem key={tagObj.id} tagObj={tagObj} updateList={updateList} />)) }\n      <div className='emptyAdd flexcc' onClick={() => setShowModal(true)}>\n        <span className='addIcon'>+</span>\n      </div>\n      { showModal && <AddTagComponent closeModal={closeModal} updateList={updateList} /> }\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport './index.scss'\n\ntype TValueHandler = (id: string) => any\n\ninterface IOption {\n  id: number | string\n  name: string\n  [key: string]: any\n}\n\ninterface IProps {\n  options: Array<IOption> // 可选项\n  valueChangeHandler: TValueHandler // 值发生改变之后的回调\n  placeHolder: string // 占位值\n  width: number | string // 如果是字符串需要带上单位\n  height: number | string\n  value?: number | string\n}\n\n\nconst Select: React.FC<IProps> = (props) => {\n  const [showOptions, setShowOpitons] = useState(false) // 表示是否显示下拉框\n\n  const setShowOpitonsHandler = () => {\n    setShowOpitons(value => !value)\n  }\n\n  const choseTagHandler = (optionObj: IOption) => {\n    const id = optionObj.id + ''\n    props.valueChangeHandler(id)\n    setShowOpitons(false)\n  }\n\n  const findTagName = (id: number | string): string | undefined => {\n    return props.options.find(obj => obj.id == id)?.name\n  }\n\n  return (\n    <div className='selectComponentWrapper' style={{ width: props.width, height: props.height }}>\n      <div className={props.value ? 'valueDiv' : 'valueDiv pl'} onClick={setShowOpitonsHandler}>{props.value ? findTagName(props.value) : props.placeHolder}</div>\n\n      {\n        showOptions && \n        <div className='optionWrapper' style={{ top: +(props.height)+5 }}>\n          <div className='flexItemWrapper'>\n          {\n            props.options.map(optionObj => (\n              <div\n                key={optionObj.id}\n                className='optionItem'\n                style={{ height: props.height }}\n                onClick={() => choseTagHandler(optionObj)}\n              >{optionObj.name}</div>\n            ))\n          }\n          </div>\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default Select","import React, { useState, useEffect, ChangeEvent, useContext } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport ReactQuill from 'react-quill'\nimport { AppContext } from '../../store/context'\nimport { fetchData } from '../../util/fetch'\nimport { ITag, IResponse, IArticle } from './interface'\nimport { setMenuDisplay } from '../../component/menu/action'\nimport Select from '../../component/select'\nimport 'react-quill/dist/quill.snow.css'\nimport './index.scss'\n\ninterface IParam {\n  articleId?: string\n}\n\nconst initArticleObj: IArticle = {\n  content: '',\n  title: '',\n  tags: [],\n}\n\n// 富文本编辑器的配置数据\nconst modules = {\n  toolbar: [\n    [{ font: [] }, { size: [] }],\n    [{ align: [] }, 'direction'],\n    ['bold', 'italic', 'underline', 'strike'],\n    [{ color: [] }, { background: [] }],\n    [{ script: 'super' }, { script: 'sub' }],\n    ['blockquote', 'code-block'],\n    [{ list: 'ordered' }, { list: 'bullet'}, { indent: '-1' }, { indent: '+1' }],\n    ['link', 'image', 'video'],\n    ['clean']\n  ],\n}\n\nconst Article: React.FC<any> = (props) => {\n  const history = useHistory()\n  const param = useParams<IParam>()\n  const context = useContext(AppContext)\n\n  const { dispatch } = context\n  const moduleState = context.appStore.menu\n  const { showMenu } = moduleState\n  const [articleObj, setArticleObj] = useState<IArticle>(initArticleObj) // 文章数据的建模\n  const [tags, setTags] = useState([] as ITag[]) // 标签列表数据的建模\n  const [allScreen, setAllScreen] = useState(false) // 是否全屏\n\n  const loginCb = () => {\n    history.push('/login')\n  }\n\n  /** 设置标签列表数据的effect */\n  useEffect(() => {\n    let mount = true\n    fetchData('/api/tag/all', 'get', loginCb).then(response => {\n      mount && setTags(response)\n    })\n    return () => { mount = false }\n  }, [])\n\n  /** 设置文章数据的effect */\n  useEffect(() => {\n    let mount = true\n    const articleId = param.articleId\n    if (articleId != undefined) { // 修改文章的情况\n      fetchData(`/api/article/${articleId}`, 'get', loginCb).then((res: IResponse) => {\n        const result = {\n          ...res,\n          tags: res.tags.map(tagObj => tagObj.id)\n        }\n        mount && setArticleObj(result)\n      })\n    } else { // 新增文章的情况\n      mount && setArticleObj(initArticleObj)\n    }\n    return () => { mount = false }\n  }, [param.articleId])\n\n  // 这个effect只在挂载的时候会被执行\n  useEffect(() => {\n    const eventHandler = (event: any) => {\n      const keyCode = event.keyCode || event.which || event.charCode\n      const ctrl = event.metaKey\n      if (ctrl && keyCode === 75) { // comand + k 组合键进行全屏\n        setAllScreen(old => !old)\n      }\n    }\n    window.document.addEventListener('keydown', eventHandler)\n    return () => {\n      window.document.removeEventListener('keydown', eventHandler)\n    }\n  }, [])\n\n  // FIXME: 修复加载数据的时候所遇到的问题\n  const save = () => {\n    fetchData('/api/article/new', 'post', loginCb, articleObj).then(res => {\n      console.log('res', res)\n    })\n  }\n\n  // 设置文章数据的handler\n  const setArticleObjHandler = (key: 'title' | 'content', value: string) => {\n    setArticleObj((currentState) => ({\n      ...currentState,\n      [key]: value\n    }))\n  }\n\n  // 设置文章标题\n  const setTitle = (event: ChangeEvent<HTMLInputElement>) => {\n    setArticleObjHandler('title', event.target.value)\n  }\n\n  // 改变标签的时候触发\n  const tagChangeHandler = (value: string) => {\n    const tags = [''+value]\n    setArticleObj(currentState => ({\n      ...currentState,\n      tags\n    }))\n  }\n\n  // 富文件内容发生变化的监听方法\n  const setContentHandler = (value: string) => {\n    setArticleObjHandler('content', value)\n  }\n\n  // 监听点击因此左侧菜单\n  const hideMenu = () => {\n    dispatch({ type: setMenuDisplay, data: !showMenu })\n  }\n\n  return (\n    <div className='articlePageWrapper'>\n      <div className='row'>\n        <input type='text' value={articleObj.title} onChange={setTitle} placeholder='请输入文章标题' className='inputC' />\n\n        {/* <select value={articleObj.tags[0] ? +articleObj.tags[0] : 0} onChange={tagChangeHandler}>\n          {\n            tags.map(tagObj => <option value={tagObj.id} key={tagObj.id}>{tagObj.name}</option>)\n          }\n        </select> */}\n        <Select\n          options={tags}\n          placeHolder='请选择文章标签'\n          width={360}\n          height={33}\n          value={articleObj.tags[0]}\n          valueChangeHandler={tagChangeHandler}\n        />\n\n        <span className='flexg' />\n        <button onClick={hideMenu} className='primaryBtn mr10'>{showMenu ? '隐藏菜单' : '显示菜单'}</button>\n        <button onClick={save} className='primaryBtn'>更新</button>\n      </div>\n      {\n        allScreen ?\n        <>\n          <div className='allScreen'></div>\n          <ReactQuill className='rich' theme='snow' value={articleObj.content} onChange={setContentHandler} modules={modules} />\n        </>\n        :\n        <ReactQuill theme='snow' value={articleObj.content} onChange={setContentHandler} modules={modules} />\n      }\n    </div>\n  )\n}\n\nexport {\n  Article,\n}\n","import React from 'react'\nimport './index.scss'\n\ninterface IProps {\n  children: any\n  height: number | string\n  loading: boolean\n}\n\nconst LoadingWrapper: React.FC<IProps> = props => {\n  return (\n    <>\n    {\n      props.loading ?\n      <div className='loadingWrapper' style={{ height: props.height }}>\n        <img className='img' style={{ maxHeight: props.height }} src='http://img2.imgtn.bdimg.com/it/u=3381596572,1571513985&fm=214&gp=0.jpg' />\n      </div>\n      :\n      props.children\n    }\n    </>\n  )\n}\n\nexport default LoadingWrapper","import React, { useState, useEffect } from 'react'\nimport { useHistory, Link } from 'react-router-dom'\nimport { fetchData } from '../../util/fetch'\nimport LoadingWrapper from '../../component/loadingWrapper'\nimport { ITag, IArticleListResponse } from '../../data.interface'\nimport './index.scss'\n\nexport const ArticleList: React.FC<any> = (props) => {\n  const [apiResponse, setApiResponse] = useState<IArticleListResponse>() // 对接口所返回的数据进行建模\n  const [loading, setLoading] = useState(false) // 表示处于加载过程中\n  const history = useHistory()\n\n  const loginCb = () => { history.push('/login') }\n\n  // 设置文章列表数据的effect\n  useEffect(() => {\n    let isMount = true // 为什么要加这句是因为fetchData是具有卸载该组件的\n    setLoading(true)\n    fetchData('/api/article/query', 'post', loginCb).then(data => {\n      isMount && setApiResponse(data)\n      setLoading(false)\n    })\n    return () => { isMount = false }\n  }, [])\n\n  // 生成背景颜色\n  const returnColor = () => {\n    const colors = ['#eb2f96', '#2f54eb', '#52c41a']\n    const idx = Math.floor((Math.random() * colors.length))\n    return colors[idx]\n  }\n\n  // 渲染标签数据\n  const renderTags = (tags: Array<ITag>) => {\n    return tags.map(tagObj => {\n      const c = returnColor()\n      return (\n        <span key={tagObj.id} className='tagItem' style={{ color: c, border: `1px solid ${c}` }}>\n          {tagObj.name}\n        </span>\n      )\n    })\n  }\n\n  return (\n    <LoadingWrapper\n      loading={loading}\n      height={600}\n    >\n      <div className='articleListComponentWrapper'>\n        <div className='header row'>\n          <div>标题</div>\n          <div>标签</div>\n          <div>发布时间</div>\n          <div>操作</div>\n        </div>\n        {\n          apiResponse && apiResponse.result.map(articleObj => (\n            <div className='articleItem row' key={articleObj.id}>\n              <div>{articleObj.title}</div>\n              <div className='tagListWrapper'>\n                {renderTags(articleObj.tags)}\n              </div>\n              <div>{articleObj.date}</div>\n              <Link to={`/articleDetail/${articleObj.id}`} className='clickSpan'>编辑</Link>\n            </div>\n          ))\n        }\n      </div>\n    </LoadingWrapper>\n  )\n}\n","import React, { useContext } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { AppContext } from './store/context'\nimport PrivateRoute from './component/privateRoute/index'\nimport { Menu } from './component/menu/index'\nimport { Page404 } from './page/404'\nimport { Login } from './page/login'\nimport { Tag } from './page/tag'\nimport { Article } from './page/article'\nimport { ArticleList } from './page/articleList'\n\nexport const AppRoute: React.FC<any> = () => {\n  const appContext = useContext(AppContext)\n  \n  const moduleMenu = appContext.appStore.menu\n  const { showMenu } = moduleMenu\n  return (\n    <Router>\n      {showMenu && <Menu />}\n      <section className={showMenu ? 'appRightContainer' : 'appRightContainerNml'}>\n        <Switch>\n          <Route path='/login'>\n            <Login />\n          </Route>\n          <PrivateRoute path='/' exact={true}>\n            <ArticleList />\n          </PrivateRoute>\n          <PrivateRoute path='/tag'>\n            <Tag />\n          </PrivateRoute>\n          <PrivateRoute path='/newArticle'>\n            <Article />  \n          </PrivateRoute>'\n          <PrivateRoute path='/articleDetail/:articleId'>\n            <Article />\n          </PrivateRoute>\n          <PrivateRoute path='/articleList'>\n            <ArticleList />\n          </PrivateRoute>\n          <Route path='*'>\n            <Page404 />\n          </Route>\n        </Switch>\n      </section>\n    </Router>\n  )\n}\n","import * as React from 'react'\nimport { AppProvider } from './store/provider'\nimport { AppRoute } from './route'\n\nexport const App: React.FC<any> = () => (\n  <AppProvider>\n    <AppRoute />\n  </AppProvider>\n)\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { App } from './app'\nimport * as serviceWorker from './serviceWorker'\nimport './scss/app.scss'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}